<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS Developers Guide: Display a map (2D)</title>
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
  
    <link rel="stylesheet" href="https://js.arcgis.com/4.19/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.19/"></script>
  
    <script>
      require([
       "esri/config",
        "esri/Map",
        "esri/views/MapView",
        "esri/rest/locator",
        "esri/Graphic",
        "esri/core/reactiveUtils"
        ], function (esriConfig,Map, MapView, locator, Graphic, reactiveUtils) {
  
        esriConfig.apiKey = "AAPKf62f4010b2b94add862b34a19067c65aVJ-JQHaka1GqDm90PrFgIZgneaJ1ukcwcntggsUawx4-KCXi2OWMcVLVWM_pbS9i";
        const map = new Map({
          basemap: "arcgis-navigation"
        });
  
        const view = new MapView({
          map: map,
          center: [18.9553, 69.6492],
          zoom: 13,
          container: "viewDiv",
        });
        places.forEach((p) => {
          const option = document.createElement("option");
          option.value = p;
          option.innerHTML = p;
          select.appendChild(option);
        });
          
        const places = ["Choose a place type...", "Parks and Outdoors", "Coffee shop", "Gas station", "Food", "Hotel"];
  
        const select = document.createElement("select");
        select.setAttribute("class", "esri-widget esri-select");
        select.setAttribute("style", "width: 175px; font-family: 'Avenir Next W00'; font-size: 1em");
  
        places.forEach((p) => {
          const option = document.createElement("option");
          option.value = p;
          option.innerHTML = p;
          select.appendChild(option);
        });
  
        view.ui.add(select, "top-right");
  
        const locatorUrl = "http://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";
  
  
        function findPlaces(category, pt) {
          locator
            .addressToLocations(locatorUrl, {
              location: pt,
              categories: [category],
              maxLocations: 25,
              outFields: ["Place_addr", "PlaceName"]
            })
  
            .then((results) => {
              view.closePopup();
              view.graphics.removeAll();
  
              results.forEach((result) => {
                view.graphics.add(
                    new Graphic({
                        attributes: result.attributes, 
                        geometry: result.location, 
                        symbol: {
                          type: "simple-marker",
                          color: "#000000",
                          size: "12px",
                          outline: {
                          color: "#ffffff",
                          width: "2px"
                        }
                      },
  
                        popupTemplate: {
                          title: "{PlaceName}",
                          content: "{Place_addr}"
                        }
                    })
                );
            });
          });
      }
  
  
      reactiveUtils.when(
        () => view.stationary,
        () => {
          findPlaces(select.value, view.center);
        }
      );
  
  
      select.addEventListener("change", (event) => {
        findPlaces(event.target.value, view.center);
      })
    
  
    </script>
  </head>
  <body>
    <div id="viewDiv"></div>
  </body>

</html>
